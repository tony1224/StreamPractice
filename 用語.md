### ▼ F
#### flatMap
![test](https://raw.githubusercontent.com/tony1224/StreamPractice/main/Images/IMG_7806.WEBP)
- 何か同じストリームで続けて処理をしたい時とか
  - ただ過去の値を見ないならflatMapLatestが良いかも
- 多重リクエストされたケース
  - 過去のイベントを残しておける
    - この用途がなければ基本使わない？  

#### flatMapLatest
![test](https://raw.githubusercontent.com/tony1224/StreamPractice/main/Images/IMG_7807.WEBP)
- <b><span style="color: orange; ">一番新しい結果を利用したい時</b>に使う
  - API通信など
- map + switchLatest
- Ob変換、常に1つのイベントのみ通知
- 新しいのがくると前イベント完了を待たない
  - すぐ新しいObを発行, subscribe
  - それまで作ったストリームを放棄
- 普通に処理して値を返したい場合、subscribeよりもこっちのが綺麗そう  
- ストリームの合成目的が強い
  - 新しいObイベントを作成し返す
```
inputs
    .viewWillAppear
    .flatMapLatest { _ -> Observable<Hoge> in
        self?.fetchHoge()
    }
    .bind(to: hogeRelay)
    .disposed(by: disposeBag)    
```

### ▼ M
#### MVVM
- 関数型, リアクティブの良さを発揮してロジックの担当部分を分けることで見通しの良いコードがかけるアーキテクチャ
- RxSwiftの場合、UIKitをサポートするRxCocoaが使える
  - UI部品にリアクティブを活かした拡張処理がかける
  - MVVMパタンを採用しやすくなっている
- あくまでUIロジックとプレゼンテーションロジックの分離
  - UIロジック
    - Vの生成, 変形, 表示非表示
    - ユーザーアクション設定, フィルタ
  - UIプレゼンテーションロジック  
    - ビジネスロジックの結果をVに返す
    - 具体的なUI部品へのカタチへの関心を持たない仕組み
- Model
  - ビジネスロジック担当
  - V,VM以外全てをMと考えるのが無難
  - Mの抽象度を更に分けるかどうかは関心ごとではない
- Data Bindingできるパタン  

### ▼ O
#### Observable
- RxSwiftのクラス
- イベントを排出するもの
- 購読してObserverが観測対象(Subject)やObの観測開始
- ストリーム, シーケンスを表現するため、同義で使われる
- Input情報の変数として利用
- disposeするまでイベントを取得し続ける
- 通知するものはNext,Error,Completedの3つ
  - Error,Completed発生後イベントは発生しない

### Observer
- 「観測するもの」
- 観測対象(Subject)に更新があった際にObserverに通知が届く仕組み
- Obで流れてくる値を受け取るために、自身を登録したり、不要になったら解除したりする
- Output情報の時の変数で利用
  - Relay型
- 購読時点でObごとに計算リソースが割り当てられる
- 購読しているObが複数存在する場合は別々に値を通知する

### ▼ R
#### Rx(Reactive Extensions)
- オブザーバーパタン, イテレーターパタン, 関数型プログラミングの概念を実装したI/F
- 元々MSが開発した.NET用のライブラリ
    - '09に公開, 現在は製品化されReactiveXという名前に変更
- 値の変化を検知しやすい
- Delegate, callback等よりも非同期処理を簡単に書けるのが特徴

### ▼ S
#### shareReplay
- Hot Observableの性質
- Driverの内部処理
- BehaviorRelay: 最後のイベントをreplayする
- Signal, Driverは replayしたいかどうかの差

- 処理が2回動くことがある問題を解決する
  - 最後にshaReplay(1)をつける
    - ConnectableObservableに変換 = <b><span style="color: orange; ">Hot変換</b>
- 通常Obとストリーム生成方法, タイミングが違う
  - 通常: 
    - subscribe後にObごとに計算リソース割り当てる               
      - Obが複数あれば各々に通知
  - ConnectableOb:
    - 複数購読してても共通の計算リソース割り当て
    - 同時にイベントを通知
    - 1本のストリームが分岐し各々にイベントが流れるイメージ
- replayだけではストリームが流れない
  - ConnectableObが持つconnectオペレータ呼び出し
    - 必要なタイミングでdisposeが必要
      - refConut用意
      - disposeされると内部カウンターをデクリメントする
      - 0になったらconnectしたソースをdispose

### ▼ あ行
#### オブザーバーパタン
- オブジェクトのイベント(事象)を他のオブジェクトへ通知する処理で使われるデザパタの一種

### ▼ さ行
#### シーケンス
- ストリーム, 川
- データがイベントとして連なった流れ
- 時間の概念として利用される
- 実現方法
  - Observableクラスで表現
  - 購読する
    - シーケンスから伝搬されてくるイベントを順次処理する仕組みのこと

### ▼ は行
#### 副作用
- 保持しないといけなくなる状態
- 副作用が強くなる = 
  - 保持し続けないといけない状態が増えること
- リアクティブプログラミングを使う
  - 副作用はいかに減らすかに命を注ぐ

### ▼ ら行
#### リアクティブプログラミング
- 連続するデータをイベントの流れ(シーケンス)としシーケンスに対する反応(リアクション)をコードとして実装
- 様々なイベント処理に対する問い合わせの仕方を統一化
    - イベント処理に関する一貫したコールアンドレスポンスが可能
- 時間とともに変化する値と振る舞いの関係を宣言的に記述する手法
- フロントエンドではよく使われる
- ex) 命令
    - cにはa*bの演算結果を代入
- ex) 関数
    - cはa*bの関係を持つ
    - aの値が変更されるたびにbの値がバックグラウンドで再計算される



